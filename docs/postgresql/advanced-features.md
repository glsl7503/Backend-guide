---
sidebar_position: 7
---

# 보안

### 🔐 **PostgreSQL 보안 개요**

- **보안**은 데이터베이스에서 중요한 정보를 보호하고, 허가되지 않은 접근을 막는 작업.
- PostgreSQL은 다양한 보안 기능을 제공하여 데이터 무결성과 기밀성을 보장.

---

### 🧑‍💻 **사용자 인증**

- **사용자 인증**은 PostgreSQL에 접속하려는 사용자의 신원을 확인하는 과정.
- **pg_hba.conf** 파일에서 인증 방법을 설정.

### **인증 방법**

1. **Trust**: 인증 없이 접속 허용 (안전하지 않음).
2. **Password**: 사용자 이름과 비밀번호로 인증.
3. **MD5**: 비밀번호를 MD5 해시로 암호화하여 인증.
4. **Peer**: 운영 체제 사용자와 데이터베이스 사용자가 일치하는지 확인.
5. **Cert**: SSL 인증서를 사용한 인증.

---

### 🛡️ **접속 제어**

- **pg_hba.conf** 파일에서 접속 권한을 세밀하게 설정.
- **접속 허용 조건**:
    - **호스트**: IP 주소나 호스트 이름을 기준으로 허용.
    - **사용자**: 특정 사용자만 접속을 허용.
    - **데이터베이스**: 접속할 수 있는 데이터베이스를 제한.

### **예시**:

```bash
# 사용자 'user1'은 '192.168.1.0/24' 네트워크에서만 접속 가능
host    all     user1    192.168.1.0/24    md5
```

---

### 🔒 **암호화 (Encryption)**

1. **SSL 암호화**
    - 클라이언트와 서버 간의 통신을 암호화하여 데이터의 기밀성을 유지.
    - **활성화 방법**: PostgreSQL 설정 파일(`postgresql.conf`)에서 `ssl = on` 설정.
2. **데이터 암호화**
    - 저장된 데이터를 암호화하여 물리적 보안을 강화.
    - PostgreSQL은 내장 암호화 기능을 제공하지 않지만, 외부 도구나 확장을 사용할 수 있음.

---

### 🏷️ **권한 관리 (Roles and Permissions)**

- **사용자 역할**(Role)을 사용하여 권한을 관리.
- **권한**: 테이블이나 데이터베이스 객체에 대한 접근을 제어.

### **기본 권한**

1. **SELECT**: 데이터를 조회할 수 있는 권한.
2. **INSERT**: 데이터를 삽입할 수 있는 권한.
3. **UPDATE**: 데이터를 수정할 수 있는 권한.
4. **DELETE**: 데이터를 삭제할 수 있는 권한.

### **역할 관리 예시**

```sql
-- 역할 생성
CREATE ROLE read_only;

-- 권한 부여
GRANT SELECT ON ALL TABLES IN SCHEMA public TO read_only;
```

---

### 🔄 **감사 로그 (Audit Logs)**

- **감사 로그**는 데이터베이스에서 발생한 이벤트를 기록하여 보안 및 규정 준수를 보장.
- PostgreSQL은 기본적으로 **로그 기록 기능**을 제공, 설정 파일에서 로그 레벨과 대상 설정 가능.

### **로그 설정 예시**:

```bash
# 모든 쿼리 로깅
log_statement = 'all'

# 로그인 로그
log_connections = on
```

---

### 🔑 **암호화된 백업**

- **백업** 시 중요한 데이터가 유출되지 않도록 암호화하는 것이 중요.
- 외부 도구를 사용하여 백업 파일을 암호화할 수 있음. 예를 들어, `pg_dump`와 `gpg`를 함께 사용하여 백업 파일을 암호화.

---

### 🚨 **보안 강화 팁**

1. **최소 권한 원칙**: 사용자와 애플리케이션에 필요한 최소 권한만 부여.
2. **강력한 비밀번호 정책**: 비밀번호는 복잡하고 주기적으로 변경하도록 설정.
3. **접근 제어**: `pg_hba.conf`를 통해 외부에서의 접근을 제한.
4. **정기적인 보안 업데이트**: PostgreSQL과 운영 체제의 보안 패치를 최신 상태로 유지.
5. **SSL/TLS 암호화 활성화**: 네트워크 상에서 데이터가 안전하게 전송되도록 설정.